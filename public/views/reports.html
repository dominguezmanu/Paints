<!-- public/views/reports.html -->
<section>
  <h1 class="page-title">Reportes de ventas</h1>
  <p class="page-subtitle">
    Analíticas básicas de facturación por rango de fechas.
  </p>

  <!-- Filtros -->
  <div class="card" style="margin-bottom: 1rem;">
    <form id="rep-sales-form">
      <div
        style="
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: 0.75rem;
          align-items: flex-end;
        "
      >
        <div>
          <label style="font-size: 0.85rem;">Desde</label><br />
          <input
            type="date"
            id="rep-from"
            style="
              width: 100%;
              padding: 0.35rem;
              border-radius: 0.4rem;
              border: 1px solid #ccc;
            "
          />
        </div>

        <div>
          <label style="font-size: 0.85rem;">Hasta</label><br />
          <input
            type="date"
            id="rep-to"
            style="
              width: 100%;
              padding: 0.35rem;
              border-radius: 0.4rem;
              border: 1px solid #ccc;
            "
          />
        </div>

        <div>
          <button type="submit" class="btn btn-primary">
            Aplicar
          </button>
        </div>
      </div>
      <p
        id="rep-sales-range-text"
        style="font-size: 0.85rem; margin-top: 0.5rem; color: var(--text-muted);"
      ></p>
    </form>
  </div>

  <!-- Resumen + desglose por tipo de pago -->
  <div class="card" style="margin-bottom: 1rem;">
    <h2 style="margin-top: 0;">Resumen de ventas</h2>

    <div
      style="
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
        margin-bottom: 1rem;
      "
    >
      <div>
        <div style="font-size: 0.85rem; color: var(--text-muted);">
          Total facturado
        </div>
        <div
          id="rep-total-facturado"
          style="font-size: 1.1rem; font-weight: 600;"
        >
          Q 0.00
        </div>
      </div>

      <div>
        <div style="font-size: 0.85rem; color: var(--text-muted);">
          Subtotal (sin descuento)
        </div>
        <div
          id="rep-total-subtotal"
          style="font-size: 1.1rem; font-weight: 600;"
        >
          Q 0.00
        </div>
      </div>

      <div>
        <div style="font-size: 0.85rem; color: var(--text-muted);">
          Descuento total
        </div>
        <div
          id="rep-total-descuento"
          style="font-size: 1.1rem; font-weight: 600;"
        >
          Q 0.00
        </div>
      </div>

      <div>
        <div style="font-size: 0.85rem; color: var(--text-muted);">
          # Facturas
        </div>
        <div
          id="rep-total-facturas"
          style="font-size: 1.1rem; font-weight: 600;"
        >
          0
        </div>
      </div>

      <div>
        <div style="font-size: 0.85rem; color: var(--text-muted);">
          Promedio por factura
        </div>
        <div
          id="rep-total-promedio"
          style="font-size: 1.1rem; font-weight: 600;"
        >
          Q 0.00
        </div>
      </div>
    </div>

    <h4 style="margin-top: 0.5rem;">Desglose por tipo de pago</h4>
    <div style="overflow-x: auto;">
      <table class="table table-small">
        <thead>
          <tr>
            <th>Tipo de pago</th>
            <th>Monto</th>
            <th>% sobre total</th>
          </tr>
        </thead>
        <tbody id="rep-total-tbody">
          <tr>
            <td colspan="3" style="text-align: center; font-size: 0.9rem;">
              Sin datos para el rango seleccionado.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Grid de top productos -->
  <div class="card-grid">
    <!-- Top por dinero -->
    <div class="card">
      <h3 style="margin-top: 0;">Top productos por dinero generado</h3>
      <p style="font-size: 0.85rem; color: var(--text-muted);">
        Ordenados por monto total (Q) en el rango seleccionado.
      </p>

      <div style="overflow-x: auto;">
        <table class="table table-small">
          <thead>
            <tr>
              <th>#</th>
              <th>Producto</th>
              <th>Unidades</th>
              <th>Monto total</th>
            </tr>
          </thead>
          <tbody id="rep-top-monto-body">
            <tr>
              <td colspan="4" style="text-align: center; font-size: 0.9rem;">
                Sin datos para el rango seleccionado.
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Top por cantidad -->
    <div class="card">
      <h3 style="margin-top: 0;">Top productos por unidades vendidas</h3>
      <p style="font-size: 0.85rem; color: var(--text-muted);">
        Ordenados por cantidad total vendida en el rango seleccionado.
      </p>

      <div style="overflow-x: auto;">
        <table class="table table-small">
          <thead>
            <tr>
              <th>#</th>
              <th>Producto</th>
              <th>Unidades</th>
              <th>Monto total</th>
            </tr>
          </thead>
          <tbody id="rep-top-cantidad-body">
            <tr>
              <td colspan="4" style="text-align: center; font-size: 0.9rem;">
                Sin datos para el rango seleccionado.
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

      <!-- Productos con menos ventas (por unidades) -->
  <div class="card" style="margin-top: 1rem;">
    <h3 style="margin-top: 0;">Productos con menos ventas</h3>
    <p style="font-size: 0.85rem; color: var(--text-muted);">
      Productos que registran menos unidades vendidas en el rango seleccionado.
    </p>

    <div style="overflow-x: auto;">
      <table class="table table-small">
        <thead>
          <tr>
            <th>#</th>
            <th>Producto</th>
            <th>Unidades vendidas</th>
            <th>Monto total</th>
          </tr>
        </thead>
        <tbody id="rep-low-sales-body">
          <tr>
            <td colspan="4" style="text-align: center; font-size: 0.9rem;">
              Sin datos para el rango seleccionado.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Productos sin stock por sucursal -->
  <div class="card" style="margin-top: 1rem;">
    <h3 style="margin-top: 0;">Productos con poco o sin stock</h3>
    <p style="font-size: 0.85rem; color: var(--text-muted);">
      Productos cuya existencia actual en la sucursal es menor a 5 unidades.
    </p>

    <div style="overflow-x: auto;">
      <table class="table table-small">
        <thead>
          <tr>
            <th>Sucursal</th>
            <th>Producto</th>
            <th>Existencias</th>
          </tr>
        </thead>
        <tbody id="rep-no-stock-body">
          <tr>
            <td colspan="3" style="text-align: center; font-size: 0.9rem;">
              No se encontraron productos con stock bajo.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  </div>
</section>
